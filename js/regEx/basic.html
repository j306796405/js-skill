<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="http://www.cnblogs.com/bundles/blog-common.css?v=VpfXXGDfdkCz7-E0_XQ205E77kSNAF0FnyWpIgmGioM1"/>
    <link rel="stylesheet" href="http://www.cnblogs.com/skins/SimpleClear/bundle-SimpleClear.css?v=EVOKy_9d-0OzsDt7Iaw0OHSiRqKJoQVRFQeK_xCGZ6c1"/>
</head>
<body>
    <ul>
        <li>中括号： <a href="http://www.cnblogs.com/snandy/p/3662423.html">http://www.cnblogs.com/snandy/p/3662423.html</a></li>
    </ul>

    <div class="post">
        <h2 class="postTitle"><a id="cb_post_title_url" href="http://www.cnblogs.com/snandy/p/3662423.html">正则表达式中括号的多义性</a></h2>
        <div class="postText"><div id="cnblogs_post_body"><p>中括号在正则中称为<span style="text-decoration: underline;"><strong>字符组</strong></span>(Character class)，有的书翻译为<span style="text-decoration: underline;"><strong>字符类</strong></span>，还有的翻译成<span style="text-decoration: underline;"><strong>字符集</strong></span>。我觉得字符组更好点，毕竟class在计算机属于中代表面向对象里的“类”。顾名思义，字符组为一组字符，它表示在一个位置里可能出现的多种字符。注意这里强调只匹配一个位置哦。</p>
            <ul>
                <li>简单字符组</li>
                <li>范围字符组</li>
                <li>组合字符组</li>
                <li>排除型字符组</li>
                <li>字符组运算</li>
                <li>预定义字符组</li>
            </ul>
            <p>&nbsp;</p>
            <h3>一、简单字符组</h3>
            <p>示例1：[123] 可以分别匹配包含1-3这5个数的字符串。</p>
            <div class="cnblogs_Highlighter sh-gutter">
                <div><div id="highlighter_686731" class="syntaxhighlighter  javascript"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">reg = /[123]/</code></div><div class="line number2 index1 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'1'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number3 index2 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'2'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number4 index3 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'3'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number5 index4 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'4'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; false</code></div><div class="line number6 index5 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'14'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number7 index6 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'25'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number8 index7 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'36'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div></div></td></tr></tbody></table></div></div>
            </div>
            <p>　　</p>
            <p>示例2：匹配 bat、cat、fat。</p>
            <div class="cnblogs_Highlighter sh-gutter">
                <div><div id="highlighter_653643" class="syntaxhighlighter  javascript"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">reg = /[bcf]at/</code></div><div class="line number2 index1 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'bat'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number3 index2 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'cat'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number4 index3 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'fat'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div></div></td></tr></tbody></table></div></div>
            </div>
            <p>&nbsp;</p>
            <h3>二、范围字符组（Range class，与连字符 “-” 一起使用）</h3>
            <p>上面示例1中 [123] 可以匹配字符'1', '2', '3'。如果要匹配0-9可以写成 [0123456789]，但有了范围字符组更简洁了，可以写成 /[0-9]/。</p>
            <p>示例3：匹配数字</p>
            <div class="cnblogs_Highlighter sh-gutter">
                <div><div id="highlighter_331591" class="syntaxhighlighter  javascript"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">reg = /[0-9]/</code></div><div class="line number2 index1 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'0'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number3 index2 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'1'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number4 index3 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'2'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number5 index4 alt2"><code class="javascript plain">...</code></div></div></td></tr></tbody></table></div></div>
            </div>
            <p>&nbsp;</p>
            <p>示例4：匹配HTML的标题标签</p>
            <div class="cnblogs_Highlighter sh-gutter">
                <div><div id="highlighter_724902" class="syntaxhighlighter  javascript"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">reg = /&lt;h[1-6]&gt;/</code></div><div class="line number2 index1 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'&lt;h1&gt;'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number3 index2 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'&lt;h2&gt;'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number4 index3 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'&lt;h3&gt;'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number5 index4 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'&lt;h4&gt;'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number6 index5 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'&lt;h5&gt;'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number7 index6 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'&lt;h6&gt;'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number8 index7 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'&lt;h7&gt;'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; false</code></div><div class="line number9 index8 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'&lt;div&gt;'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; false</code></div></div></td></tr></tbody></table></div></div>
            </div>
            <p>　　</p>
            <p>匹配小写英文字母可以用字符组 [a-z]， 匹配大写英文字母用 [A-Z]。这里最关键的是连字符 "-"，不要理解为减号。 它的意义是“从什么到什么”，如[a-z]理解为从 “a” 到 “z”。</p>
            <p>需要注意几点</p>
            <p>1. 连字符（-）只在字符组内（中括号）才是元字符。如</p>
            <div class="cnblogs_Highlighter sh-gutter">
                <div><div id="highlighter_25459" class="syntaxhighlighter  javascript"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">reg = /1-5/</code></div><div class="line number2 index1 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'1'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; false</code></div><div class="line number3 index2 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'2'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; false，不是连字符，不包含2，3，4</code></div><div class="line number4 index3 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'-'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; false， 这里 “-” 只是一个普通字符</code></div></div></td></tr></tbody></table></div></div>
            </div>
            <p>2. 甚至在字符组内部，它也不一定是元字符。如</p>
            <div class="cnblogs_Highlighter sh-gutter">
                <div><div id="highlighter_92880" class="syntaxhighlighter  javascript"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">reg1 = /[-123]/</code></div><div class="line number2 index1 alt1"><code class="javascript keyword">var</code> <code class="javascript plain">reg2 = /[123-]/</code></div><div class="line number3 index2 alt2"><code class="javascript comments">// 在字符组首部或尾部位置，仅作为一个普通字符，而不是表示范围的连字符</code></div><div class="line number4 index3 alt1"><code class="javascript plain">reg1.test(</code><code class="javascript string">'-'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true </code></div><div class="line number5 index4 alt2"><code class="javascript plain">reg2.test(</code><code class="javascript string">'-'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div></div></td></tr></tbody></table></div></div>
            </div>
            <p>此外，很多元字符在字符组内都变成了普通字符，如(^$?)等。</p>
            <p>3. 范围不能乱写，比如只能 [0-9]，不能[9-0]。不然浏览器会报错，如下是Firebug的报错</p>
            <p><img src="http://images.cnitblog.com/i/114013/201404/131851522157222.png" alt=""></p>
            <p>范围字符组实际是安装字符对于的ASCII码值来确定的，值小的在前面，值大的在后面。例如[0-9]的码值为48~57，[a-z]的码值为97~122，[A-Z]的码值为65~90。</p>
            <p>附上ASCII表</p>
            <p style="margin-top: -15px;"><img src="http://images.cnitblog.com/i/114013/201404/131858548728965.jpg" alt="" height="700"></p>
            <p>另外，可以这么写 [0-z]，即表示范围ASCII 48~122，但不推荐这么写，它的意义不直白。如果不查ASCII表，很难知道它表示数字[0-9]，大写字母[A-Z]，小写字母[a-z]和一些特殊字符（[,\,],^,_,`）。</p>
            <p>&nbsp;</p>
            <h3>三、组合字符组（Combination class）</h3>
            <p>由多种字符组组合一起的字符组</p>
            <p>示例5：匹配a~f和1-5之间的字符 [a-f1-5]</p>
            <div class="cnblogs_Highlighter sh-gutter">
                <div><div id="highlighter_362791" class="syntaxhighlighter  javascript"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">reg = /[a-c1-3]/</code></div><div class="line number2 index1 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'a'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number3 index2 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'b'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number4 index3 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'c'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number5 index4 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'1'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number6 index5 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'2'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div><div class="line number7 index6 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'3'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div></div></td></tr></tbody></table></div></div>
            </div>
            <p>需要注意的是，字符组内不要有空格，有人喜欢在f和1之间加个空格，以便阅读起来舒服一些，但这是不允许的。</p>
            <p>&nbsp;</p>
            <h3>四、排除型字符组（Negated character class，与脱字符 “^” 一起使用）</h3>
            <p>有时列出所有的字符几乎不可能，那得列多少啊，这时可以使用排除型字符组。只要在左方括号后紧跟一个脱字符^即可。排除型字符组表示：匹配一个未列出的字符（match a character that's not listed），而不是不要匹配列出的字符。</p>
            <p>示例6：匹配非数字字符</p>
            <div class="cnblogs_Highlighter sh-gutter">
                <div><div id="highlighter_907657" class="syntaxhighlighter  javascript"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="javascript keyword">var</code> <code class="javascript plain">reg = /[^0-9]/</code></div><div class="line number2 index1 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'1'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; false</code></div><div class="line number3 index2 alt2"><code class="javascript plain">reg.test(</code><code class="javascript string">'2'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; false</code></div><div class="line number4 index3 alt1"><code class="javascript plain">reg.test(</code><code class="javascript string">'a'</code><code class="javascript plain">) </code><code class="javascript comments">// -&gt; true</code></div></div></td></tr></tbody></table></div></div>
            </div>
            <p>&nbsp;</p>
            <h3>五、字符组运算（方括号嵌套+运算符）</h3>
            <p>有些语言支持，比如&amp;&amp;+[] Java中就支持，但JavaScript不支持。</p>
            <p>示例7：匹配英文字母中除去元音字符的字符</p>
            <div class="cnblogs_Highlighter sh-gutter">
                <div><div id="highlighter_97967" class="syntaxhighlighter  java"><div class="toolbar"><span><a href="#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="java plain">[[a-z]&amp;&amp;[^aeiou]] </code><code class="java comments">// a-z 且排除掉5个元音字符aeiou</code></div></div></td></tr></tbody></table></div></div>
            </div>
            <p>　　</p>
            <h3>六、预定义字符组（又称字符组简记）</h3>
            <p>比如JavaScript中提供了 \d, \w, \s 表示数字字符组(<strong>d</strong>igit)，单词字符组(<strong>w</strong>ord)，和空白符字符组(<strong>s</strong>pace)。另外还有对于的排除型字符组简写 \D，\W，\S 分别对于非数字字符组，非单词字符组，非空白字符组。</p>

        </div>
    </div>
</body>
</html>